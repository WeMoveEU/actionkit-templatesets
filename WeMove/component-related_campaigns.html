<div class="mx-auto mt-16 max-w-[400px] md:max-w-none" data-wm-related-campaigns-wrapper>
    <h2 class="text-wm-purple mb-2">
        Related campaigns
    </h2>

    <div class="mb-8 grid grid-flow-dense auto-rows-campaign-card gap-8 md:grid-cols-3 lg:gap-6 xl:gap-10">
        <article data-wm-related-campaign-card class="rounded overflow-hidden relative row-span-3 grid grid-rows-[subgrid] gap-2 bg-gray-100">
            <a data-wm-related-campaign-card-link class="relative" href="https://action.wemove.eu/sign/2025-01-23-russian-fleet-launch-EN">
                <span data-wm-related-campaign-card-signatures class="absolute bottom-14 right-2 z-20 flex items-center justify-center bg-wm-purple px-2 py-1 font-libre-franklin text-xs font-bold uppercase text-white">
                    50,413 Signers
                </span>

                <img
                    data-wm-related-campaign-card-image
                    alt="Old tanker sailing in the sea"
                    width="750"
                    height="416"
                    class="relative h-full w-full object-cover"
                    src="https://wemove.eu/_next/image?url=%2Fuploads%2Fmedium_Russian_fleet_campaign_d8f3695836.jpg&amp;w=1920&amp;q=75" />

                <span class="absolute uppercase bottom-0 block w-full bg-wm-orange py-3 text-center text-white font-gilroy text-lg hover:bg-wm-pink duration-150 transition-all">
                    Take action →
                </span>
            </a>

            <h3 class="mx-4 mt-0 mb-0 line-clamp-3 leading-7">
                <a data-wm-related-campaign-card-link data-wm-related-campaign-card-title class="uppercase !text-black" href="https://action.wemove.eu/sign/2025-01-23-russian-fleet-launch-EN">
                    EU, stop buying Russian oil and funding the war
                </a>
            </h3>

            <div class="mx-4 mb-4 font-normal text-sm">
                <p data-wm-related-campaign-card-description>Stop Russia’s shadow fleet from fueling war and risking our seas – demand EU action now!</p>
            </div>
        </article>

        <article data-wm-related-campaign-card class="rounded overflow-hidden relative row-span-3 grid grid-rows-[subgrid] gap-2 bg-gray-100">
            <a data-wm-related-campaign-card-link class="relative" href="https://action.wemove.eu/sign/2025-01-23-russian-fleet-launch-EN">
                <span data-wm-related-campaign-card-signatures class="absolute bottom-14 right-2 z-20 flex items-center justify-center bg-wm-purple px-2 py-1 font-libre-franklin text-xs font-bold uppercase text-white">
                    50,413 Signers
                </span>

                <img
                    data-wm-related-campaign-card-image
                    alt="Old tanker sailing in the sea"
                    width="750"
                    height="416"
                    class="relative h-full w-full object-cover"
                    src="https://wemove.eu/_next/image?url=%2Fuploads%2Fmedium_Russian_fleet_campaign_d8f3695836.jpg&amp;w=1920&amp;q=75" />

                <span class="absolute uppercase bottom-0 block w-full bg-wm-orange py-3 text-center text-white font-gilroy text-lg hover:bg-wm-pink duration-150 transition-all">
                    Take action →
                </span>
            </a>

            <h3 class="mx-4 mt-0 mb-0 line-clamp-3 leading-7">
                <a data-wm-related-campaign-card-link data-wm-related-campaign-card-title class="uppercase !text-black" href="https://action.wemove.eu/sign/2025-01-23-russian-fleet-launch-EN">
                    EU, stop buying Russian oil and funding the war
                </a>
            </h3>

            <div class="mx-4 mb-4 font-normal text-sm">
                <p data-wm-related-campaign-card-description>Stop Russia’s shadow fleet from fueling war and risking our seas – demand EU action now!</p>
            </div>
        </article>

        <article data-wm-related-campaign-card class="rounded overflow-hidden relative row-span-3 grid grid-rows-[subgrid] gap-2 bg-gray-100">
            <a data-wm-related-campaign-card-link class="relative" href="https://action.wemove.eu/sign/2025-01-23-russian-fleet-launch-EN">
                <span data-wm-related-campaign-card-signatures class="absolute bottom-14 right-2 z-20 flex items-center justify-center bg-wm-purple px-2 py-1 font-libre-franklin text-xs font-bold uppercase text-white">
                    50,413 Signers
                </span>

                <img
                    data-wm-related-campaign-card-image
                    alt="Old tanker sailing in the sea"
                    width="750"
                    height="416"
                    class="relative h-full w-full object-cover"
                    src="https://wemove.eu/_next/image?url=%2Fuploads%2Fmedium_Russian_fleet_campaign_d8f3695836.jpg&amp;w=1920&amp;q=75" />

                <span class="absolute uppercase bottom-0 block w-full bg-wm-orange py-3 text-center text-white font-gilroy text-lg hover:bg-wm-pink duration-150 transition-all">
                    Take action →
                </span>
            </a>

            <h3 class="mx-4 mt-0 mb-0 line-clamp-3 leading-7">
                <a data-wm-related-campaign-card-link data-wm-related-campaign-card-title class="uppercase !text-black" href="https://action.wemove.eu/sign/2025-01-23-russian-fleet-launch-EN">
                    EU, stop buying Russian oil and funding the war
                </a>
            </h3>

            <div class="mx-4 mb-4 font-normal text-sm">
                <p data-wm-related-campaign-card-description>Stop Russia’s shadow fleet from fueling war and risking our seas – demand EU action now!</p>
            </div>
        </article>
    </div>
</div>

<script type="module" async>
    const relatedCampaignsWrapper = document.querySelector('[data-wm-related-campaigns-wrapper]');

    if (!relatedCampaignsWrapper) {
       // return false;
    }

    const getRelatedCampaignsData = async () => {
        const relatedCampaignsURL = "https://wemove.eu/api/campaigns?locale={{ link_iso }}&current-petition={{page.name}}";

        try {
            const response = await fetch(relatedCampaignsURL);

            if (!response.ok) {
                throw new Error(`Response status: ${response.status}`);
            }

            return await response.json();
        } catch (error) {
            console.error(error.message);
        }
    }

    const renderRelatedCampaigns = async () => {
        const relatedCampaigns = await getRelatedCampaignsData();

        const relatedCampaignsCards = [...document.querySelectorAll('[data-wm-related-campaign-card]')];

        relatedCampaignsCards.forEach((card, index) => {
            const cardData = relatedCampaigns[index];

            card.querySelector('[data-wm-related-campaign-card-title]').innerHTML = cardData.attributes.title;
            card.querySelectorAll('[data-wm-related-campaign-card-link]')[0].href = cardData.attributes.url;
            card.querySelectorAll('[data-wm-related-campaign-card-link]')[1].href = cardData.attributes.url;
            card.querySelector('[data-wm-related-campaign-card-signatures]').innerHTML = cardData.attributes.signatures;
            card.querySelector('[data-wm-related-campaign-card-description]').innerHTML = cardData.attributes.content;

            card.querySelector('[data-wm-related-campaign-card-image]').src = `https://wemove.eu/${cardData.attributes.featured_image.data.attributes.url}`;
            card.querySelector('[data-wm-related-campaign-card-image]').alt = cardData.attributes.image_alternative_text;
        });
    };

    renderRelatedCampaigns();
</script>